<mat-card class="product-review">
  <mat-card-header>
    <mat-card-title style="margin-bottom: 1rem !important;">{{ productTitle }}</mat-card-title>
    <mat-card-subtitle style="margin-bottom: 1rem !important;">{{ subtitle }}</mat-card-subtitle>
  </mat-card-header>

  <!-- Carrosel de imagens-->
  <div class="carousel-wrapper">
    <!-- 🖼️ Imagem principal -->
    <div class="carousel-image" (click)="openModal(currentImage)">
      <img [src]="currentImage" alt="Imagem do produto" />
    </div>

    <!-- ◀️ ▶️ Botões de navegação -->
    <div class="carousel-controls">
      <button (click)="previousImage()">❮</button>
      <button (click)="nextImage()">❯</button>
    </div>

    <!-- 🟢 Miniaturas -->
    <div class="carousel-thumbnails">
      @for (img of imageUrl; let i = $index; track img) {
      <img
        [src]="img"
        [class.active]="i === currentIndex"
        (click)="setCurrentIndex(i)"
        alt="Thumb"
      />
      }
    </div>
  </div>

  <!-- 🔍 Modal -->
  <div class="image-modal" *ngIf="modalImage" (click)="modalImage = null">
    <img [src]="modalImage" />
  </div>

  <mat-card-content>
    <h3 style="margin-top: 1rem !important;">✨ Principais Benefícios</h3>
    <div class="benefits-list">
      @for (benefit of benefits; track benefit) {
      <div class="benefit-item">
        <mat-icon color="primary">check_circle</mat-icon>
        <span>{{ benefit }}</span>
      </div>
      }
    </div>

    <p class="preco">Compare os preços:</p>
    <div class="afiliate-buttons">
      @if ( linkComprar[0] != "") {
      <a
        class="affiliate-button"
        mat-stroked-button
        color="accent"
        [href]="linkComprar[0]"
        target="_blank"
        aria-label="Ver preço no Mercado Livre"
        style="
          margin-bottom: 0.5rem;
          background-color: rgb(205, 205, 4) !important;
          color: rgb(31, 29, 29) !important;
        "
      >
        💰 Ver Preço Atual no Mercado Livre
      </a>
      }

      @if ( linkComprar[1] != "") {
      <a
        class="affiliate-button"
        mat-stroked-button
        color="accent"
        [href]="linkComprar[1]"
        target="_blank"
        aria-label="Ver preço no Mercado Livre"
        style="
          margin-bottom: 0.5rem;
          background-color: orangered !important;
          color: #ffffff !important;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        "
      >
        💰 Ver Preço Atual na Shopee
      </a>
      }

      @if ( linkComprar[2] != "") {
      <a
        class="affiliate-button"
        mat-stroked-button
        color="accent"
        [href]="linkComprar[2]"
        target="_blank"
        aria-label="Ver preço no Mercado Livre"
        style="
          background-color: burlywood !important;
          color: rgb(31, 29, 29) !important;
        "
      >
        💰 Ver Preço Atual na Amazon
      </a>
      }
    </div>
    <p class="preco">Preço a partir de {{ precoFormatado(price) }}</p>

    <!-- AdSense Banner-->
    <div class="ads-container">
      <ins
        class="adsbygoogle"
        style="display: block !important; min-width: 250px;"
        data-ad-format="fluid"
        data-ad-layout-key="-fb+5w+4e-db+86"
        data-ad-client="ca-pub-8235228978821445"
        data-ad-slot="2052757110"
      ></ins>
    </div>

    <h3>🎥 Review em vídeo</h3>
    <div class="video-container">
      <iframe
        width="930"
        height="523"
        [src]="videoUrl | safe"
        frameborder="0"
        allowfullscreen
      ></iframe>
    </div>

    <br>

    <h3>💡 Nossa Opinião</h3>
    <br>
    <p>{{ opinion }}</p>

    <br>

    <p>
      <mat-icon color="primary">verified</mat-icon>
      Produto recomendado! Excelente avaliação custo-benefício.
    </p>
  </mat-card-content>

  <div class="afiliate-buttons" style="margin-bottom: 1rem; margin-top: 1rem">
    @if ( linkComprar[0] != "") {
    <a
      class="affiliate-button"
      mat-raised-button
      color="primary"
      [href]="linkComprar[0]"
      target="_blank"
      aria-label="Comprar com desconto"
      style="
        background-color: rgb(205, 205, 4) !important;
        color: rgb(31, 29, 29) !important;
      "
    >
      👉 Comprar com Desconto no Mercado Livre
    </a>
    }

    @if ( linkComprar[1] != "") {
    <a
      class="affiliate-button"
      mat-stroked-button
      color="accent"
      [href]="linkComprar[1]"
      target="_blank"
      aria-label="Ver preço no Mercado Livre"
      style="
        margin-bottom: 0.5rem;
        background-color: orangered !important;
        color: #ffffff !important;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
      "
    >
      👉 Comprar com Desconto na Shopee
    </a>
    }

    @if ( linkComprar[2] != "") {
    <a
      class="affiliate-button"
      mat-stroked-button
      color="accent"
      [href]="linkComprar[2]"
      target="_blank"
      aria-label="Ver preço no Mercado Livre"
      style="
        background-color: burlywood !important;
        color: rgb(31, 29, 29) !important;
      "
    >
      👉 Comprar com Desconto na Amazon
    </a>
    }
  </div>
</mat-card>
